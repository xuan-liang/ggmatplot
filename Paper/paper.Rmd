---
title: '`ggmatplot`: An R package for data visualization on wide-format data'
tags:
- R
- grammar of graphics
- ggplot2
- data visualisation
authors:
  - name: Xuan Liang
    orcid: 0000-0002-0792-3751
    affiliation: 1
  - name: Francis K. C. Hui
    orcid: 0000-0003-0765-3533
    affiliation: 1
  - name: Dilinie Seimon
    orcid: 0000-0003-4431-6077
    affiliation: 2
  - name: Emi Tanaka
    orcid: 0000-0002-1455-259X
    affiliation: 2
affiliations:
  - name: The Australian National University
    index: 1
  - name: Monash University
    index: 2
citation_author: Liang et. al.
date: "`r Sys.Date()`"
year: 2022
bibliography: paper.bib
output: rticles::joss_article
csl: apa.csl
journal: JOSS
---


```{r setup, include = FALSE}
library(tidyverse)
library(knitr)
library(kableExtra)
knitr::opts_chunk$set(message = FALSE,
                      warning = FALSE)

# data 

wide_df <- tribble(~restaurant, ~food_rating, ~service_rating, ~ambience_rating, ~overall_rating,
        "R1", 4, 3, 4, 4,
        "R2", 4, 5, 4, 4,
        "R3", 3, 4, 5, 3, 
        "R4", 2, 4, 4, 3, 
        "R5", 3, 4, 4, 3)

long_df <- pivot_longer(wide_df, contains("rating"), 
                        names_to = "rating_type",
                        names_pattern = "(.+)_rating",
                        values_to = "rating")

abund_df <- tribble(~Site, ~`Soil dry mass`, ~`Moss`, ~Alopcune, ~Arctlute, ~Pardpull, ~Trocterr, ~Zoraspin,
                    1, 2.3321, 3.0445, 10, 0, 45, 57, 4,
                    2, 3.0493, 1.0986, 2, 0, 37, 65, 9,
                    3, 2.5572, 2.3979, 20, 0, 45, 66, 1)

table_styling <- function(df, ...) {
  kable(df, ..., booktabs = TRUE, linesep = "") %>% 
    kable_classic()
}

data("spider", package = "mvabund")
```



# Summary

The layered grammar of graphics [@Wickham2010-kt], implemented as the `ggplot2` package [@Wickham2016] in the statistical language R [@rstats], is a powerful and popular tool to create versatile statistical graphics. This graphical system, however, requires input data to be organised in a manner that a data column is mapped to an aesthetic element (e.g. x-coordinate, y-coordinate, color, size), which create friction in constructing plots with an aesthetic element that span multiple columns in the original data by requiring users to re-organise the data.  

The `ggmatplot`, built upon `ggplot2`, is an R-package that allows quick plotting across the columns of matrices or data with the result returned as a `ggplot` object. The package is inspired by the function `matplot()` in the core R `graphics` system, thus `ggmatplot` can be considered as a `ggplot` version of `matplot` with the benefits of customising the plots as any other `ggplot` objects via `ggplot2` functions.


# Statement of need

Input data to construct plots with `ggplot2` require data to be organised in a manner that maps data columns to aesthetic elements. This required form is, however, not consistent with some common data formats, specifically data where the column names contain information to be mapped into the plot or the variables to be mapped into the same aesthetic elements. Consequently, plotting with `ggplot2` interrupts the workflow of a user that is trying to quickly explore these types of data. The `ggmatplot` R-package provides a solution to this common friction to produce plots with `ggplot2`. 


# Examples


Data can be tidied in a rectangular form where each row represents an observational unit, each column represents a variable, and each cell represents a value [@Wickham2014-gy]. In some cases, what constitutes a variable (or observational unit), hence a column (or row), in a tidy data can be dependent upon interpretation or downstream interest (e.g. Tables \ref{tab:tab1} and \ref{tab:tab2} can be both considered as tidy data), but a clear violation of tidy data principles is when the column names contain data values, e.g. Table \ref{tab:tab3} contain the name of the species across a number of column names.


```{r tab1, echo = FALSE}
table_styling(wide_df, col.names = c("Restaurant", "Food",
                                     "Service", "Ambience", "Overall"),
              caption = 'Restaurant rating data in "tidy" form') %>% 
  add_header_above(c(" ", "Rating" = 4))
```

```{r tab2, echo = FALSE}
table_styling(long_df, col.names = c("Restauant", "Rating type", "Rating"),
              caption = 'Restaurant rating data in "molten" form')
```

```{r tab3, echo = FALSE}
table_styling(abund_df,
              caption = 'Spider abundance data with environmental covariates.') %>% 
  add_header_above(c(" ", "Environment covariates" = 2, "Species abundance" = 5))
```

```{r plot1}
library(ggmatplot)
ggmatplot(x = select(wide_df, contains("rating")),
          plot_type = "both",
          xlab = "Restaurant")
```


# Acknowledgements



# References
